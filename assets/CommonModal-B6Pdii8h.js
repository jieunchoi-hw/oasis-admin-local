import{a as I,V as j}from"./VRow-CBGn2PcA.js";import{V as D,b as O,d as z}from"./VCard-CZWifjcu.js";import{V as R}from"./VTable-iqCwaBxv.js";import{E as W,M,a7 as U,r as q,p as H,ad as X,l as h,al as Y,S as G,X as S,b as s,af as J,as as K,h as Q,o as d,c as m,w as c,u as i,a as w,F as E,j as x,a0 as Z,t as C,i as L,d as F,e as T,Y as A,n as _,$ as B,V as ee}from"./index-DiedJyfL.js";import{V as te}from"./VPagination-CMUslTkG.js";import{V as ae}from"./VCardText-C32vnt7F.js";import{m as le,V as $}from"./VOverlay-DQXzzkiq.js";import{f as oe}from"./forwardRefs-DWGaNmQL.js";import{u as ne}from"./scopeId-BV2Wt2qa.js";import{e as re}from"./VMenu-kbEKRXNX.js";const ie=W({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...le({origin:"center center",scrollStrategy:"block",transition:{component:re},zIndex:2400})},"VDialog"),se=M()({name:"VDialog",props:ie(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,b){let{emit:n,slots:u}=b;const f=U(e,"modelValue"),{scopeId:v}=ne(),r=q();function t(a){var V,P;const y=a.relatedTarget,p=a.target;if(y!==p&&((V=r.value)!=null&&V.contentEl)&&((P=r.value)!=null&&P.globalTop)&&![document,r.value.contentEl].includes(p)&&!r.value.contentEl.contains(p)){const g=K(r.value.contentEl);if(!g.length)return;const k=g[0],N=g[g.length-1];y===k?N.focus():k.focus()}}H(()=>{document.removeEventListener("focusin",t)}),X&&h(()=>f.value&&e.retainFocus,a=>{a?document.addEventListener("focusin",t):document.removeEventListener("focusin",t)},{immediate:!0});function o(){var a;n("afterEnter"),(a=r.value)!=null&&a.contentEl&&!r.value.contentEl.contains(document.activeElement)&&r.value.contentEl.focus({preventScroll:!0})}function l(){n("afterLeave")}return h(f,async a=>{var y;a||(await Y(),(y=r.value.activatorEl)==null||y.focus({preventScroll:!0}))}),G(()=>{const a=$.filterProps(e),y=S({"aria-haspopup":"dialog"},e.activatorProps),p=S({tabindex:-1},e.contentProps);return s($,S({ref:r,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},a,{modelValue:f.value,"onUpdate:modelValue":V=>f.value=V,"aria-modal":"true",activatorProps:y,contentProps:p,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:o,onAfterLeave:l},v),{activator:u.activator,default:function(){for(var V=arguments.length,P=new Array(V),g=0;g<V;g++)P[g]=arguments[g];return s(J,{root:"VDialog"},{default:()=>{var k;return[(k=u.default)==null?void 0:k.call(u,...P)]}})}})}),oe({},r)}}),ue={key:0},de={key:0},ke={__name:"CommonTable",props:{data:{type:Array,required:!0},columns:{type:Array,required:!0},page:{type:Number,required:!0},itemsPerPage:{type:Number,required:!0},totalItems:{type:Number,required:!0},actions:{type:Array,default:()=>[]},actionLabels:{type:Object,default:()=>({edit:"수정",delete:"삭제"})},actionColors:{type:Object,default:()=>({edit:"primary",delete:"error"})}},emits:["edit","delete","page-change","action"],setup(e,{emit:b}){const n=e,u=b,f=Q(()=>{const t=(n.page-1)*n.itemsPerPage;return n.data.slice(t,t+n.itemsPerPage)}),v=q(n.page);h(()=>n.page,t=>{v.value=t}),h(v,t=>{t!==n.page&&u("page-change",t)});function r(t,o){u("action",{action:t,item:o}),t==="edit"&&u("edit",o),t==="delete"&&u("delete",o)}return(t,o)=>(d(),m(E,null,[s(i(j),null,{default:c(()=>[s(i(I),{cols:"12"},{default:c(()=>[s(i(D),{rounded:"lg",elevation:"1"},{default:c(()=>[s(i(R),{density:"comfortable"},{default:c(()=>[w("thead",null,[w("tr",null,[(d(!0),m(E,null,x(e.columns,l=>(d(),m("th",{key:l.key,style:Z({width:l.width||"auto"})},C(l.label),5))),128)),e.actions.length>0?(d(),m("th",ue,"관리")):L("",!0)])]),w("tbody",null,[(d(!0),m(E,null,x(f.value,l=>(d(),m("tr",{key:l.id},[(d(!0),m(E,null,x(e.columns,a=>(d(),m("td",{key:a.key},[F(t.$slots,`cell-${a.key}`,{item:l,value:l[a.key]},()=>[A(C(l[a.key]),1)])]))),128)),e.actions.length>0?(d(),m("td",de,[(d(!0),m(E,null,x(e.actions,a=>(d(),T(i(B),{key:a,size:"small",variant:"tonal",color:e.actionColors[a],class:_({"ml-2":a!==e.actions[0]}),onClick:y=>r(a,l)},{default:c(()=>[A(C(e.actionLabels[a]),1)]),_:2},1032,["color","class","onClick"]))),128))])):L("",!0)]))),128))])]),_:3})]),_:3})]),_:3})]),_:3}),s(i(te),{modelValue:v.value,"onUpdate:modelValue":[o[0]||(o[0]=l=>v.value=l),o[1]||(o[1]=l=>t.$emit("page-change",l))],class:"mt-4",length:Math.ceil(e.totalItems/e.itemsPerPage),size:"small"},null,8,["modelValue","length"])],64))}},ce={class:"font-weight-bold"},Ee={__name:"CommonModal",props:{visible:{type:Boolean,required:!0},mode:{type:String,required:!0},title:{type:String,required:!0},form:{type:Object,required:!0},fields:{type:Array,required:!0},maxWidth:{type:String,default:"500"}},emits:["confirm","close","update:form"],setup(e,{emit:b}){const n=e,u=b,f=q(n.visible);h(()=>n.visible,t=>{f.value=t}),h(f,t=>{t||u("close")});function v(){u("confirm",{...n.form})}function r(t,o){const l={...n.form,[t]:o};u("update:form",l)}return(t,o)=>(d(),T(i(se),{modelValue:f.value,"onUpdate:modelValue":o[1]||(o[1]=l=>f.value=l),"max-width":e.maxWidth},{default:c(()=>[s(i(D),null,{default:c(()=>[s(i(O),{class:"d-flex align-center justify-space-between"},{default:c(()=>[w("span",ce,C(e.title),1),s(i(B),{icon:"",onClick:o[0]||(o[0]=l=>t.$emit("close")),color:"black",variant:"plain"},{default:c(()=>[s(i(ee),{icon:"ri-close-line"})]),_:1})]),_:1}),s(i(ae),null,{default:c(()=>[F(t.$slots,"default",{form:e.form,updateForm:r,fields:e.fields})]),_:3}),s(i(z),{class:"justify-end"},{default:c(()=>[s(i(B),{color:"black",onClick:v},{default:c(()=>[A(C(e.mode==="add"?"Confirm":"Save"),1)]),_:1})]),_:1})]),_:3})]),_:3},8,["modelValue","max-width"]))}};export{ke as _,Ee as a};
