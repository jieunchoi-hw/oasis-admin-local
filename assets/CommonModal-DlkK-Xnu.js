import{a as I,V as O}from"./VRow-BDdqDiMt.js";import{V as $,c as R,a as W,e as j}from"./VCard-CCsYtvxH.js";import{V as z}from"./VTable-IHpAkNg2.js";import{D as U,L as M,a6 as H,r as L,m as X,ac as Z,k as h,ak as G,R as J,W as A,b as s,ae as K,ao as Q,g as Y,o as d,c as m,w as c,u as i,a as w,F as C,i as x,$ as _,t as E,h as q,d as F,e as T,X as S,n as ee,Z as B,V as te}from"./index-BD_oSQYS.js";import{V as ae}from"./VPagination-C75YUYrw.js";import{m as le,V as D}from"./VOverlay-0soReTlA.js";import{f as oe}from"./forwardRefs-DWGaNmQL.js";import{u as ne}from"./scopeId-BFPDPOFh.js";import{e as re}from"./VMenu-CWpQf-Fj.js";const ie=U({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...le({origin:"center center",scrollStrategy:"block",transition:{component:re},zIndex:2400})},"VDialog"),se=M()({name:"VDialog",props:ie(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,b){let{emit:n,slots:u}=b;const f=H(e,"modelValue"),{scopeId:v}=ne(),r=L();function t(a){var V,P;const y=a.relatedTarget,p=a.target;if(y!==p&&((V=r.value)!=null&&V.contentEl)&&((P=r.value)!=null&&P.globalTop)&&![document,r.value.contentEl].includes(p)&&!r.value.contentEl.contains(p)){const g=Q(r.value.contentEl);if(!g.length)return;const k=g[0],N=g[g.length-1];y===k?N.focus():k.focus()}}X(()=>{document.removeEventListener("focusin",t)}),Z&&h(()=>f.value&&e.retainFocus,a=>{a?document.addEventListener("focusin",t):document.removeEventListener("focusin",t)},{immediate:!0});function o(){var a;n("afterEnter"),(a=r.value)!=null&&a.contentEl&&!r.value.contentEl.contains(document.activeElement)&&r.value.contentEl.focus({preventScroll:!0})}function l(){n("afterLeave")}return h(f,async a=>{var y;a||(await G(),(y=r.value.activatorEl)==null||y.focus({preventScroll:!0}))}),J(()=>{const a=D.filterProps(e),y=A({"aria-haspopup":"dialog"},e.activatorProps),p=A({tabindex:-1},e.contentProps);return s(D,A({ref:r,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},a,{modelValue:f.value,"onUpdate:modelValue":V=>f.value=V,"aria-modal":"true",activatorProps:y,contentProps:p,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:o,onAfterLeave:l},v),{activator:u.activator,default:function(){for(var V=arguments.length,P=new Array(V),g=0;g<V;g++)P[g]=arguments[g];return s(K,{root:"VDialog"},{default:()=>{var k;return[(k=u.default)==null?void 0:k.call(u,...P)]}})}})}),oe({},r)}}),ue={key:0},de={key:0},Pe={__name:"CommonTable",props:{data:{type:Array,required:!0},columns:{type:Array,required:!0},page:{type:Number,required:!0},itemsPerPage:{type:Number,required:!0},totalItems:{type:Number,required:!0},actions:{type:Array,default:()=>[]},actionLabels:{type:Object,default:()=>({edit:"수정",delete:"삭제"})},actionColors:{type:Object,default:()=>({edit:"primary",delete:"error"})}},emits:["edit","delete","page-change","action"],setup(e,{emit:b}){const n=e,u=b,f=Y(()=>{const t=(n.page-1)*n.itemsPerPage;return n.data.slice(t,t+n.itemsPerPage)}),v=L(n.page);h(()=>n.page,t=>{v.value=t}),h(v,t=>{t!==n.page&&u("page-change",t)});function r(t,o){u("action",{action:t,item:o}),t==="edit"&&u("edit",o),t==="delete"&&u("delete",o)}return(t,o)=>(d(),m(C,null,[s(i(O),null,{default:c(()=>[s(i(I),{cols:"12"},{default:c(()=>[s(i($),{rounded:"lg",elevation:"1"},{default:c(()=>[s(i(z),{density:"comfortable"},{default:c(()=>[w("thead",null,[w("tr",null,[(d(!0),m(C,null,x(e.columns,l=>(d(),m("th",{key:l.key,style:_({width:l.width||"auto"})},E(l.label),5))),128)),e.actions.length>0?(d(),m("th",ue,"관리")):q("",!0)])]),w("tbody",null,[(d(!0),m(C,null,x(f.value,l=>(d(),m("tr",{key:l.id},[(d(!0),m(C,null,x(e.columns,a=>(d(),m("td",{key:a.key},[F(t.$slots,`cell-${a.key}`,{item:l,value:l[a.key]},()=>[S(E(l[a.key]),1)])]))),128)),e.actions.length>0?(d(),m("td",de,[(d(!0),m(C,null,x(e.actions,a=>(d(),T(i(B),{key:a,size:"small",variant:"tonal",color:e.actionColors[a],class:ee({"ml-2":a!==e.actions[0]}),onClick:y=>r(a,l)},{default:c(()=>[S(E(e.actionLabels[a]),1)]),_:2},1032,["color","class","onClick"]))),128))])):q("",!0)]))),128))])]),_:3})]),_:3})]),_:3})]),_:3}),s(i(ae),{modelValue:v.value,"onUpdate:modelValue":[o[0]||(o[0]=l=>v.value=l),o[1]||(o[1]=l=>t.$emit("page-change",l))],class:"mt-4",length:Math.ceil(e.totalItems/e.itemsPerPage),size:"small"},null,8,["modelValue","length"])],64))}},ce={class:"font-weight-bold"},ke={__name:"CommonModal",props:{visible:{type:Boolean,required:!0},mode:{type:String,required:!0},title:{type:String,required:!0},form:{type:Object,required:!0},fields:{type:Array,required:!0},maxWidth:{type:String,default:"500"}},emits:["confirm","close","update:form"],setup(e,{emit:b}){const n=e,u=b,f=L(n.visible);h(()=>n.visible,t=>{f.value=t}),h(f,t=>{t||u("close")});function v(){u("confirm",{...n.form})}function r(t,o){const l={...n.form,[t]:o};u("update:form",l)}return(t,o)=>(d(),T(i(se),{modelValue:f.value,"onUpdate:modelValue":o[1]||(o[1]=l=>f.value=l),"max-width":e.maxWidth},{default:c(()=>[s(i($),null,{default:c(()=>[s(i(R),{class:"d-flex align-center justify-space-between"},{default:c(()=>[w("span",ce,E(e.title),1),s(i(B),{icon:"",onClick:o[0]||(o[0]=l=>t.$emit("close")),color:"black",variant:"plain"},{default:c(()=>[s(i(te),{icon:"ri-close-line"})]),_:1})]),_:1}),s(i(W),null,{default:c(()=>[F(t.$slots,"default",{form:e.form,updateForm:r,fields:e.fields})]),_:3}),s(i(j),{class:"justify-end"},{default:c(()=>[s(i(B),{color:"black",onClick:v},{default:c(()=>[S(E(e.mode==="add"?"Confirm":"Save"),1)]),_:1})]),_:1})]),_:3})]),_:3},8,["modelValue","max-width"]))}};export{Pe as _,ke as a};
